import{defineInterface as e,defineDisplay as t}from"@directus/extensions-sdk";import{defineComponent as a,computed as n,ref as l,watch as o,resolveComponent as i,openBlock as r,createElementBlock as c,createVNode as u,createElementVNode as s,createBlock as d,createCommentVNode as p,normalizeStyle as v,withCtx as m,createTextVNode as f,toDisplayString as h}from"vue";const g={class:"price-input-container"},y={class:"price-unit-select"};var b=a({__name:"interface",props:{value:{},choices:{default:()=>[]}},emits:["input"],setup(e,{emit:t}){const a=e,v=t,m=n((()=>a.choices?a.choices.sort(((e,t)=>t.value-e.value)):[])),f=n((()=>Number(a.value))),h=n((()=>{if(0===m.value.length)return console.log("You have no choices"),"1";const e=m.value.find((e=>Number(e.value)<=f.value));return console.log(`unit: ${e}`),e?e.value.toString():m.value[0]?.value.toString()})),b=n((()=>f.value/Number(h.value??1))),x=l(h.value),_=l(b.value),w=n((()=>Number(_.value)*Number(x.value)));function $(e){x.value=e,v("input",w.value)}return o((()=>a.value),(e=>{x.value=h.value,_.value=b.value,console.log(`newValue: ${e}`),console.log("items: ",m.value),console.log(`unitValue: ${x.value}`),console.log(`shortedPriceValue: ${_.value}`),console.log("--------------------------------")})),(e,t)=>{const a=i("VInput"),n=i("VSelect");return r(),c("div",g,[u(a,{type:"number",step:"any",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),onInput:t[1]||(t[1]=e=>function(e){const t=e.target,a=Number(t?.value??0);_.value=a,v("input",w.value)}(e))},null,8,["modelValue"]),s("div",y,[m.value.length>0?(r(),d(n,{key:0,modelValue:x.value,"onUpdate:modelValue":[t[2]||(t[2]=e=>x.value=e),$],items:m.value,"item-text":"text","item-value":"value","allow-other":!1,"show-deselect":!1},null,8,["modelValue","items"])):p("v-if",!0)])])}}}),x=[],_=[];function w(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var i=x.indexOf(o);-1===i&&(i=x.push(o)-1,_[i]={}),a=_[i]&&_[i][n]?_[i][n]:_[i][n]=r()}else a=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),l=0;l<a.length;l++)e.setAttribute(a[l],t.attributes[a[l]]);var i="prepend"===n?"afterbegin":"beforeend";return o.insertAdjacentElement(i,e),e}}w('\n.price-input-container[data-v-4c09c8ae] {\n  display: flex;\n  gap: 10px;\n}\n.price-unit-select[data-v-4c09c8ae] {\n  width: 300px !important;\n}\n.remaining[data-v-4c09c8ae] {\n  display: none;\n  width: 24px;\n  color: var(--theme--form--field--input--foreground-subdued);\n  font-weight: 600;\n  text-align: right;\n  vertical-align: middle;\n  font-feature-settings: "tnum";\n}\n.v-input:focus-within .remaining[data-v-4c09c8ae] {\n  display: block;\n}\n.v-input:focus-within .hide[data-v-4c09c8ae] {\n  display: none;\n}\n.warning[data-v-4c09c8ae] {\n  color: var(--theme--warning);\n}\n.danger[data-v-4c09c8ae] {\n  color: var(--theme--danger);\n}\n',{});var $=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a},k=e({id:"shorted-price-interface",name:"Shorted Price",icon:"box",description:"This is my custom interface!",component:$(b,[["__scopeId","data-v-4c09c8ae"],["__file","interface.vue"]]),options:[{field:"choices",name:"$t:choices",type:"json",meta:{note:"Add the unit  that will be used for input and display.",interface:"list",options:{template:"{{ text }}",fields:[{field:"text",name:"Text",type:"string",meta:{interface:"system-input-translated-string",width:"half"}},{field:"value",name:"Value",type:"decimal",meta:{interface:"input",width:"half"}}]}}}],group:"standard",localTypes:["standard"],types:["decimal","float"]});const V={class:"display-labels"};var N=a({__name:"display",props:{value:{},choices:{default:()=>[]}},setup(e){const t=e,a=l(t.value),o=n((()=>{let e=0!==t.choices.length&&a.value?t.choices.find((e=>Number(e.value)<=Number(a.value))):void 0;return e=e?{value:e.value,text:`${Number(a.value)/e.value} ${e.text}`,foreground:e.foreground??"var(--theme--foreground)",background:e.background??"var(--theme--background-normal)"}:{value:1,text:a.value?.toString()??"",foreground:"var(--theme--foreground)",background:"var(--theme--background-normal)"},e}));return(e,t)=>{const a=i("v-chip");return r(),c("div",V,[o.value?(r(),d(a,{key:0,style:v({"--v-chip-color":o.value.foreground,"--v-chip-background-color":o.value.background}),small:"",disabled:"",label:""},{default:m((()=>[f(h(o.value.text),1)])),_:1},8,["style"])):p("v-if",!0)])}}});w("\n.display-labels[data-v-0b691890] {\n  display: inline-flex;\n}\n",{});const S=[k],T=[t({id:"shorted-price-value",name:"Shorted Price Value",icon:"box",description:"This display shows the shorted price value",component:$(N,[["__scopeId","data-v-0b691890"],["__file","display.vue"]]),options:[{field:"choices",name:"$t:choices",type:"json",meta:{interface:"list",options:{template:"{{text}}",fields:[{field:"text",name:"$t:text",type:"string",meta:{interface:"system-input-translated-string",width:"half",required:!0,options:{placeholder:"$t:displays.labels.choices_text_placeholder"}}},{field:"value",name:"$t:value",type:"string",meta:{interface:"input",options:{font:"monospace",placeholder:"$t:displays.labels.choices_value_placeholder"},required:!0,width:"half"}},{field:"icon",name:"$t:icon",type:"string",meta:{interface:"select-icon",width:"half"}},{field:"color",name:"$t:color",type:"string",meta:{interface:"select-color",width:"half"}},{field:"foreground",name:"$t:foreground_color",type:"string",meta:{interface:"select-color",width:"half"}},{field:"background",name:"$t:background_color",type:"string",meta:{interface:"select-color",width:"half"}}]}}}],types:["float","decimal"]})],A=[],j=[],I=[],q=[],E=[];export{T as displays,S as interfaces,A as layouts,j as modules,E as operations,I as panels,q as themes};
